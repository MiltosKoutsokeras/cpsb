\chapter{Introduction} 

% There used to be a time when Capcom was a young and small company fighting for its survival.
Founded in 1979 in Osaka by Kenzo Tsujimoto with the intent to develop and sell games, Capcom was in the business of mechanical and electrical "coin-ops". Their first cabinet, released in 1983 was a base-ball title named "Little League".

In 1984, they entered the world of video-games with "Vulgus". Despite efforts to set themselves apart by marketing their products as "\textbf{Cap}sule \textbf{Com}puters", the tile received a mixed reception. Arcades were a competitive world where lined up cabinets had only a few seconds to catch the eyes of a customer. It was especially difficult to compete for a company which, at the time, did not have the best technology.

\begin{q}{Noritaka Funamizu, Producer (Capcom)}
I always considered Capcom as someone fighting with a bamboo stick. We didn't have the resources to equal Sega's or Namco'
s hardware. 

While they were racing in F1 cars, we were driving Hondas.
\end{q}

The metaphor appears justified when comparing side by side two titles from 1987, Capcom's "1943" and Sega's "Afterburner".

\begin{figure}[H]
\img{1943.png}
\caption*{1943: The Battle of Midway by Capcom (1987)}
\end{figure}




"The Battle of Midway" was no match to Sega's blockbuster but despite its simple graphics it did honorably. Other Capcom titles managed to do well, notably Ghost’n Goblins in 1984 and Commando in 1985.

What Capcom did not have in raw power they had to made it up with imagination, skills, and heart. 

\begin{figure}[H]
\img{afterburner.png}
\caption*{Afterburner by SEGA (1987)}
\end{figure}

Occasionally, wit would not to be enough. Released in 1987,  "Street Fighter" was an audaciously innovative title but a commercial failure.

In "Street Fighter" players controlled their character with a standard joystick but instead of regular buttons to trigger attacks, the cabinet was equipped with two large pneumatic pushers with one intended for kicks and the other for punches. Pipes would conduct the air to the board where pressure would be measured. The harder a player punched the button and the higher the damage inflicted.

On paper it was a good idea but in practice there were issues. Without tactile feedback, players tended to smash as hard as possible, forgetting to manage their effort. After a few rounds the right arm was shot and fatigue made rounds not fun. Besides enjoyment, there were also the issues of injuries and tendinitis. To rectify, Capcom retrofitted the control system with something more "standard" while still allowing player to select the power via six buttons. 

The game became playable but what remained was something with unimpressive graphic and sluggish controls. The cabinet was largely ignored and despite attempt to boost sales with discounts, "the most amazing dedicated upright ever" soon fell into oblivion.



% \begin{figure}[H]
% \nbimg{sf1_control.png} 
% \caption*{Street Fighter 1 control panel}
% \end{figure}

% In February 1991, that world experienced a revolution when Capcom released its XXth arcade game. Five years earlier, the Osaka based company had bet an innovative Street Fighter 1 in 1987. Initially intended as a game where players had to hit hard two pnematics buttons as hard as possible, the game had to be converted to due to complains of fatigue and injuries. The game control was sluggish, the precision of collision disheartening. You could only play two character (Ryu and Ken) and the opponents were severely over-powered.

\begin{figure}[H]
\img{sf1_4_3.png}
\caption*{Street Fighter 1 (1987)}
\end{figure}

% Announced as as sequel, it would have been fair for players to expect mere improvements from the next iteration. What came out instead was to stir up players passions. Staring at a screenshots of each games give a good idea of how much of a world apart these two titles were.


\begin{figure}[H]
\img{sf1_cabinet.png}
\caption*{Street Fighter 1 cabinet flyer}
\end{figure}


Besides facing fierce competitions, Capcom had to deal with a complex production pipeline. Looking at the Printed Circuit Boards (PCBs) hosting games from 1984 to 1987 reveals a high variations of components.

Summarizing the usage of the Motorola 6809, Zilog Z80, Motorola 68000, Intel 8751 (MCU), YM2203, YM2151, YM2149, and MSM5205 for the early Capcom titles shows that even games produced the same year wouldn't necessarily feature the same chips. Even the ubiquitous Z-80 was used inconsistently since it could be dedicated to game logic, audio or both like in "1942" board which features two of them.



\begin{figure}[H]
{ 
\setlength{\tabcolsep}{3.0pt}
\setlength\cmidrulewidth{\heavyrulewidth} % Make cmidrule = 
\begin{tabular}{lccccccccc}

  & & \multicolumn{4}{c}{CPU} &  \multicolumn{4}{c}{SYNTH} \\
  \cmidrule(lr){3-6}
  \cmidrule(lr){7-10}
 
  \textbf{Game Name} & \textbf{YY} & \textbf{6809} & \textbf{Z80} & \textbf{68k} & \textbf{MCU} & \textbf{2203} & \textbf{2151} & \textbf{2149} & \textbf{5205} \\               
  % Game & Year & 6809 & z80 & 68k & MCU & 2203 & 2151 & 2149 & 5205 \\               
  \toprule    
\href{https://www.youtube.com/watch?v=45ELzG1ivEA}{Vulgus}
                & 84          &               &      X       &              &              &               &               &       X       &               \\
\href{https://www.youtube.com/watch?v=R5mg6XPqtBs}{Higemaru}
                & 84          &               &      X       &              &              &               &               &       X       &               \\
\href{https://www.youtube.com/watch?v=Em7UwOOBvlA}{1942}
                & 84          &               &      X       &              &              &               &               &       X       &               \\
  \toprule    
\href{https://www.youtube.com/watch?v=1qctKI_t5eY}{Commando}
                & 85          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=SugLAqaPhqA}{Ghost'n Goblins}  
                & 85          &       X       &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=mrO9qwGXdy8}{Gun Smoke}        
                & 85          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=cIC2mNNryZg}{Section Z}
                & 85          &               &      X       &              &              &       X       &               &       X       &               \\
  \toprule    
\href{https://www.youtube.com/watch?v=L1FVWdlQNG8}{Trojan}
                & 86          &               &      X       &              &              &       X       &               &               &       X       \\
\href{https://www.youtube.com/watch?v=57lg9pFUgco}{Speed Rumbler}
                & 86          &       X       &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=0QyLx94PMio}{Dyn Side Arms}
                & 86          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=0f4jWQyf-fs}{Legendary Wings}
                & 86          &               &      X       &              &              &       X       &               &       X       &               \\
  \toprule    
\href{https://www.youtube.com/watch?v=kntCwchJWfw}{1943}
                & 87          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=ZzKStmMAiHM}{Black Tiger}
                & 87          &               &      X       &              &      X       &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=kVLCv-YgWco}{Street Fighter}
                & 87          &               &      X       &      X       &      X       &               &       X       &               &       X       \\
\href{https://www.youtube.com/watch?v=1ZtwOGN-ZeE}{Tiger Road}
                & 87          &               &      X       &      X       &              &       X       &               &       X       &       X       \\
  \toprule    
\href{https://www.youtube.com/watch?v=zG620nr7vko}{Bionic Commando}
                & 88          &               &      X       &      X       &      X       &               &       X       &               &               \\
\href{https://www.youtube.com/watch?v=zG620nr7vko}{F1-Dream}
                & 88          &               &      X       &      X       &      X       &       X       &               &       X       &               \\
  \toprule    
\end{tabular}%
}\caption*{Usage of chips in Capcom arcades from 1984 to 1988\cite{cps0chipslist}.}
\label{fig:capcom_pcbs}
\end{figure}


Even though most games did mostly the same thing (move sprites over backgrounds), the hardware had to be re-invented over and over again. Not only it was expensive, the pipeline also slowed down production since game programming pace was hindered by bugs in the hardware. Full speed could only be achieved in the later stage of development which placed Capcom at a further disadvantage with its competitors.

Capcom was also plagued with piracy. Since its PCBs were made with of-the-shelf components, it was easy for counterfeiters to copy them, dump the ROMs and load it in their own "bootleg". Without having to offset the cost of development, bootlegs sold for less than official games and these missed sales weighted heavily on Capcom financial health.


Painted as is, the future of Capcom appeared uncertain. But far from failing, the company did better than surviving. It strove.

 The first glimpse into neo-Capcom came with Forgotten Worlds in 1988.

 \begin{figure}[H]
\img{fw_4_3.png}
\caption*{Forgotten Worlds (1988)}
\end{figure}

  \begin{figure}[H]
  \img{cps1_announcement.jpg}
  \caption*{Capcom's CPS-1 announcement flyer (1989).}
  \end{figure}

 With Forgotten Worlds using a "new technology" (later known as CPS-1), Capcom production quality went a notch up. Not only massive sprites moved on the screen, they were made of many more colors.

The first international hit came with "Final Fight" in 1989. Up to that point in time, the "beat 'em up" genre had been dominated by Technos thanks to its excellent series of Kunio-kun and Double Dragon. 

With Cody, Guy, and Mike, Capcom cleared the room. Artists were starting to get the grasp of the full capability of the CPS-1 to provide gorgeous visuals. The game-play was fantastic. And more importantly the timing was right for the US market where "beat 'em up" were all the rage.

 
The overall quality of "Final Fight" established Capcom as an unarguable AAA player in the world of arcades.

  

\label{nin_ff}
 \begin{figure}[H]
\img{ff_4_3.png}
\caption*{Final Fight (1989)}
\end{figure}

Perhaps the best compliment came from competitors who, years later, would admit of the demoralizing effect "Final Fight" had on them.

\begin{q}{Yoshihisa Kishimoto, Planner\cite{dd} (Double Dragon)}
  

  Without a doubt, the people from Capcom hurt Technos Japan a lot with Final Fight which was superior on every level to Double Dragon III. Not only they had amazing designers, they also gave their teams means to innovate on the hardware level (CPS-1). 

  For us it was an horrible awakening because it proved we had been unable to evolve as fast as them.
  %<ref src="">Yoshihisa Kishimoto, Enter The Double Dragon: p142</ref>
  \end{q}



Not only quality improved, quantity also increased. Thanks to its stable platform and tools, Capcom was able to release more than thirty tile between 1988 and 1995, all based on its CPS-1 platform.

And then in 1991 came the worldwide mega-hit, "Street Fighter 2".

"Street Fighter 2" was a quantum leap in gaming. It blew gamers minds. The eight characters came in different size, shape and gender. They each had their own characteristics, moves and powers. They had depth. The music was engaging, the audio effects crisp. Control felt precise. And what to say about the outstanding graphics and full screen 60Hz animation only that it was something like people had never seen before.


The game immediately developed a cult following. Players had to wait in lines to drop quarters in the cabinet. Tournaments with cash rewards were held. Operators purchased multiple cabinets\cite{sf2_oral_history} to reduce the wait time but at the end of the days machines still overflowed with coins.



By 1995, the series had generated \$2.3 billion with 200,000 cabinets sold\cite{usgamer20160101} (60,000 World Warriors units and 140,000 Champion Edition units). By 2017 that figure reached \$10.61 billions\cite{gamerevolution20140126}, making "Street Fighter 2" the third top grossing game of all time.

\label{nin_sf2}
\begin{figure}[H]
\img{sf2_4_3.png}
\caption*{Street Fighter 2 (1991).}
\end{figure}


This book is a engineering love letter to the system that enabled Capcom to become an arcades household.

In chapter one, the hardware of the CP-S three systems are described in excruciating details. Beyond the hard reality of silicon and wires, a discussion of the design choices is provided when relevant.

In the sub-sequent chapters is studied the software powering the hardware.

In particular are explained the five pipelines resulting in a game. From the Motorola 68000 and Zilog-80 programming to the integration of assets for the OKI (SFX), the YM2151 (musics) and the CPS-A/B (GFX).


\begin{CJK}{UTF8}{min}
Ready? さあ行こう!
\end{CJK}

\begin{figure}[H]
{ \setlength{\tabcolsep}{3.0pt}
\begin{tabularx}{\textwidth}{Xrr} 
  \textbf{Game Name} & \textbf{ GFX }  & \textbf{ Year } \\               
  \toprule    
\href{}{Forgotten Worlds} & 4 MiB & 1988 \\ 
\href{}{Ghouls'n Ghosts} & 3 MiB & 1988 \\ 
  \toprule    
\href{}{Strider} & 4 MiB & 1989 \\ 
\href{}{Dynasty Wars} & 8 MiB & 1989 \\ 
\href{}{Willow} & 4 MiB & 1989 \\ 
\href{}{U.N Squadron} & 2 MiB & 1989 \\ 
\href{}{Final Fight} & 2 MiB & 1989 \\ 
  \toprule    
\href{}{1941: Counter Attack} & 2 MiB &  1990 \\ 
\href{}{Mercs} &  3 MiB & 1990 \\ 
\href{}{Mega Twins} & 2 MiB & 1990 \\ 
\href{}{Magic Sword} & 2 MiB & 1990 \\ 
\href{}{Carrier Air Wing} & 2 MiB  & 1990 \\ 
\href{}{Nemo} & 2 MiB &  1990 \\ 
  \toprule    
\href{}{Street Fighter II: The World Warrior} & 6 MiB & 1991 \\ 
\href{}{Three Wonders} & 4 MiB & 1991 \\ 
\href{}{The King of Dragons} & 4 MiB & 1991 \\ 
\href{}{Captain Commando} &  4 MiB & 1991 \\ 
\href{}{Knights of the Round} & 4 MiB  & 1991 \\ 
  \toprule    
\href{}{Street Fighter II: Champion Edition} & 6 MiB & 1992 \\ 
\href{}{Adventure Quiz: Capcom World 2} & 2 MiB & 1992 \\ 
\href{}{Varth: Operation Thunderstorm} & 2 MiB & 1992 \\ 
\href{}{Quiz \& Dragons: Capcom Quiz Game} & 2 MiB & 1992 \\ 
\href{}{Street Fighter II' Turbo: Hyper Fighting} &  6 MiB & 1992 \\ 
  \toprule    
\href{}{Ken Sei Mogura: Street Fighter II} & 6 MiB & 1993 \\ 
\href{}{Pnickies} & 2 MiB & 1993 \\ 
  \toprule    
\href{}{Quiz Tonosama no Yabo 2} &  4 MiB & 1995 \\ 
\href{}{Pang! 3} & 2 MiB  & 1995 \\ 
Mega Man the Power Battle & 8 MiB  & 1995 \\

\toprule    
\end{tabularx}%
}\caption*{Capcom CPS-1 based arcade games.}
\end{figure}










