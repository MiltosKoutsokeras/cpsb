\chapter{Introduction} 

The origin of Capcom can be traced back to the foundation of I.R.M. Corporation in 1979 and and its subsidiary Japan Capsule Computers Co in 1981 by Kenzo Tsujimoto. Located in Osaka prefecture, the two companies respectively manufactured and distributed electrical games.

The nickname of their products, "\textbf{Cap}sule \textbf{Com}puters", perfectly summarized what the company stood for. Intending to extend beyond the trendy personal computers of the era, the "coin-ops" were sold as "capsules packed to the brim with gaming fun". The hard outer shell embodied the desire to protect intellectual property , prevents illegal copies, and inferior imitations.

After a merging in 1981 the resulting entity, Sanbi, was rebranded "Capcom" in 1983. The first cabinet, released the same year, was a base-ball title named "Little League". In 1984, Capcom entered the world of video-games with their first title "Vulgus".

Arcades were a competitive world where lined up cabinets had only a few seconds to catch the eyes of a customer. It was especially difficult to compete for a company which, at the time, did not have the best technology.

\begin{q}{Noritaka Funamizu, Capcom game Planner}
I always considered Capcom as someone fighting with a bamboo stick. We didn't have the resources to equal Sega's or Namco'
s hardware. 

While they were racing in F1 cars, we were driving Hondas.
\end{q}


\begin{figure}[H]
\img{1943.png}
\caption*{1943: The Battle of Midway by Capcom (1987)}
\end{figure}

The metaphor appears justified when comparing side by side two titles from 1987, Capcom's "1943" (which Funamizu directed) and Sega's "Afterburner".

From a technical standing point, Capcom's valiant board featured a 6Mhz z80 CPU with a graphic system capable of animating one sprites layer on top of one text layer, and two background layers. 

The sound system, piloted via a second z80 running at 3Mhz generated both musics and sound effect via Yamaha FM synthesis.

On the opposing corner, Sega's platform named "X Board", was on a league of its own. Its core ran on a dual 12.5 MHz Motorola 68000 CPUs. The graphic processor, Sega Super Scaler chipset clocked at 50MHz, was capable of both scaling and rotating up to 256 sprites over two background layers, one "road" layer, and even had raycasting capabilities. 

Its sound system, ran by a 4MHz z80 spotted a SegaPCM 16-channel stereo chip capable of rendering digitized sound effects far surpassing what could be achieved with FM synthesis.



\begin{figure}[H]
\img{afterburner.png}
\caption*{Afterburner by SEGA (1987)}
\end{figure}

% "The Battle of Midway" was no match to Sega's blockbuster 
% but 
Despite its simple graphics, 1943 sold honorably. It managed to become the second highest-grossing table arcade game of 1987 thanks to its engaging gameplay. 

During the dawn of Capcom history, more titles managed to do well despite limited technology. In 1985, "Wolf of the BattleField" a.k.a Commando\index{Game!Commando}, conquered the world and in particular UK where test locations resulted in an order of a thousand units.

\begin{figure}[H]
\img{commando.png}
\caption*{Commando (1985)}
\end{figure}

USA distributor, Data East, prominently advertised the profit prospects of the cabinet.
\vfill

\img{commando_cabinet.png}


Released in 1984, Ghost’n Goblins\index{Game!Ghost'n Goblins} is another video-games which is emblematic of Capcom's capacity to do more with less. 

With the same bamboo-stick technology of Commando board, and the same director Tokuro Fujiwara, a small team made of three people, programmer Toshio Arima, artist Masayoshi Kurokawa, and composer Ayako Mori managed to create another hit.

In this medieval fantasy inspired title, the hero is to rescue an abducted lover. Arthur had to face hordes of Zombies, Magicians, Skeletons, Red Arremers, Flying Knights, and the most unforgiving control system known to mankind.

The story was well put together. Bosses such as Unicorns, Dragons, Satan, and the chief Astaroth were well-animated. Despite its nightmare inducing difficulty, player liked the game. 

% During its early years, a pattern in Capcom titles emerged. Teams could not rely on their technology to make good games. What they lacked in raw power they had to made it up with imagination, tinkering, and heart.
\vfill 

\begin{figure}[H]
\img{gb.png}
\caption*{Ghost’n Goblins (1984)}
\end{figure}
\pagebreak

It became the 10\textsuperscript{th} highest-grossing arcade game in Japan and took the 9\textsuperscript{th} spot in US.
\vfill 
\begin{figure}[H]
\img{gb_flyer.png}
\caption*{Ghost’n Goblins flyer (1984)}
\end{figure}
\pagebreak

What Capcom lacked in raw power, it had to made it up with imagination and tinkering. But wit was not always enough. In 1987, Capcom published "Street Fighter", an audaciously innovative title but a commercial failure.

In "Street Fighter" players controlled their character with a standard joystick but used two large pneumatic pushers for kicks and for punches. Pipes conducted air to the board where pressure would be measured. The harder a player punched the button and the higher the damage inflicted.

Without tactile feedback, players tended to smash as hard as possible, forgetting to manage their effort. After a few rounds the right arm was shot and fatigue made rounds not fun. Besides enjoyment, there were also the issues of injuries and tendinitis. To rectify, Capcom retrofitted the control system with something more "standard" while still allowing player to select the power via six buttons. 

The game became playable but resulted in unimpressive graphics and sluggish controls. The cabinet was largely ignored and despite attempt to boost sales with discounts, "the most amazing dedicated upright ever" soon fell into oblivion.


\begin{figure}[H]
\img{sf1_4_3.png}
\caption*{Street Fighter 1 (1987)}
\end{figure}

% Announced as as sequel, it would have been fair for players to expect mere improvements from the next iteration. What came out instead was to stir up players passions. Staring at a screenshots of each games give a good idea of how much of a world apart these two titles were.


\begin{figure}[H]
\img{sf1_cabinet.png}
\caption*{Street Fighter 1 cabinet flyer}
\end{figure}


\section{Costly Production}
Besides facing technologically advanced competitors, Capcom had to deal with a complex production pipeline. Looking at the Printed Circuit Boards\index{PCB!Printed Circuit Boards} (PCBs)\index{PCB} hosting their games from 1984 to 1988 reveals a high variations of components.

Summarizing the usage of the Motorola 6809, Zilog Z80, Motorola 68000, Intel 8751 (MCU), YM2203, YM2151, YM2149, and MSM5205 for the early Capcom titles shows that even games produced the same year wouldn't necessarily feature the same chips. 

Even the ubiquitous Z-80 was used inconsistently since it could be dedicated to game logic, audio or both like in "1942" board which features two of them.



\begin{figure}[H]
{ 
\setlength{\tabcolsep}{3.0pt}
\setlength\cmidrulewidth{\heavyrulewidth} % Make cmidrule = 
\begin{tabularx}{\textwidth}{Xccccccccc}

  & & \multicolumn{4}{c}{CPU} &  \multicolumn{4}{c}{SOUNDS} \\
  \cmidrule(lr){3-6}
  \cmidrule(lr){7-10}
 
  \textbf{Game Name} & \textbf{Year} & \textbf{M6809} & \textbf{Z80} & \textbf{M68000} & \textbf{i8751} & \textbf{2203} & \textbf{2151} & \textbf{2149} & \textbf{5205} \\               
  % Game & Year & 6809 & z80 & 68k & MCU & 2203 & 2151 & 2149 & 5205 \\               
  \toprule    
\href{https://www.youtube.com/watch?v=45ELzG1ivEA}{Vulgus}
                & 1984          &               &      X       &              &              &               &               &       X       &               \\
\href{https://www.youtube.com/watch?v=R5mg6XPqtBs}{Higemaru}
                & 1984          &               &      X       &              &              &               &               &       X       &               \\
\href{https://www.youtube.com/watch?v=Em7UwOOBvlA}{1942}
                & 1984          &               &      X       &              &              &               &               &       X       &               \\
  \toprule    
\href{https://www.youtube.com/watch?v=1qctKI_t5eY}{Commando}
                & 1985          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=SugLAqaPhqA}{Ghost'n Goblins}  
                & 1985          &       X       &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=mrO9qwGXdy8}{Gun Smoke}        
                & 1985          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=cIC2mNNryZg}{Section Z}
                & 1985          &               &      X       &              &              &       X       &               &       X       &               \\
  \toprule    
\href{https://www.youtube.com/watch?v=L1FVWdlQNG8}{Trojan}
                & 1986          &               &      X       &              &              &       X       &               &               &       X       \\
\href{https://www.youtube.com/watch?v=57lg9pFUgco}{Speed Rumbler}
                & 1986          &       X       &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=0QyLx94PMio}{Dyn Side Arms}
                & 1986          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=0f4jWQyf-fs}{Legendary Wings}
                & 1986          &               &      X       &              &              &       X       &               &       X       &               \\
  \toprule    
\href{https://www.youtube.com/watch?v=kntCwchJWfw}{1943}
                & 1987          &               &      X       &              &              &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=ZzKStmMAiHM}{Black Tiger}
                & 1987          &               &      X       &              &      X       &       X       &               &       X       &               \\
\href{https://www.youtube.com/watch?v=kVLCv-YgWco}{Street Fighter}
                & 1987          &               &      X       &      X       &      X       &               &       X       &               &       X       \\
\href{https://www.youtube.com/watch?v=1ZtwOGN-ZeE}{Tiger Road}
                & 1987          &               &      X       &      X       &              &       X       &               &       X       &       X       \\
  \toprule    
\href{https://www.youtube.com/watch?v=zG620nr7vko}{Bionic Commando}
                & 1988          &               &      X       &      X       &      X       &               &       X       &               &               \\
\href{https://www.youtube.com/watch?v=zG620nr7vko}{F1-Dream}
                & 1988          &               &      X       &      X       &      X       &       X       &               &       X       &               \\
  \toprule    
\end{tabularx}%
}\caption*{Usage of chips in Capcom arcades from 1984 to 1988\cite{cps0chipslist}.}
\label{fig:capcom_pcbs}
\end{figure}


Even though most games did mostly the same thing (move sprites over backgrounds), the hardware had to be re-invented over and over again. 

The pipeline also slowed down production since game programming pace was hindered by bugs in the hardware. Full speed could only be achieved in the later stage of development which placed Capcom at a further disadvantage with its competitors.


\section{Plagued by piracy}
Since its PCBs were made with of-the-shelf components, counterfeiters where able to physically copy them, dump the software ROMs and build replicas called "bootlegs". 

Without having to offset the cost of development, bootlegs sold for less than official games and these missed sales weighted heavily on Capcom financial health. 

\section{A new era}
With the accumulation of competitions, production difficulties, and piracy, Capcom's future looked uncertain. But far from failing, they did better than surviving. They strove. 

A new era started in 1988. With the release of Forgotten Worlds and Strider, players got a first glimpse into the kind of games the Osaka company was now capable of.  



 \begin{figure}[H]
\img{fw_4_3.png}
\caption*{Forgotten Worlds (1988)}
\end{figure}



 

  \begin{figure}[H]
  \img{cps1_announcement.jpg}
  \caption*{Capcom's CPS-1 announcement flyer (1989).}
  \end{figure}

With both games using a mysterious and intriguing "new technology" (later renamed "CP-System" and then "CPS-1"), Capcom production quality improved. Not only massive sprites moved on the screen, they were made of many more colors. The audio was also better, noteworthily featuring digitized sounds.

The first mega-hit came with "Final Fight"\index{Game!Final Fight} in 1989. Up to that point in time, the "beat 'em up" genre had been dominated by Technos thanks to its excellent series of Kunio-kun and Double Dragon. 

With Cody, Guy, and Mike, Capcom cleared the room. Despite a minuscule budget of 2MiB for the graphics, the art team, let by Akira Yasuda (a.k.a Akiman) used the full capability of the CPS-1 to provide gorgeous visuals and engaging musics. The game-play was fantastic. And more importantly the timing was right for the US market where "beat 'em up" were all the rage.



  

\label{nin_ff}
 \begin{figure}[H]
\img{ff_4_3.png}
\caption*{Final Fight (1989)}
\end{figure}

"Final Fight" soon became Capcom's top-selling game at the time\cite{birth_of_chunli} and established the company as an unarguable AAA arcades producer.

\pagebreak

Perhaps the best compliment came from competitors who, years later, would admit of the demoralizing effect "Final Fight" had on them.

\begin{q}{Yoshihisa Kishimoto, Planner\cite{dd} (Double Dragon)}
  

  % Without a doubt, 
  The people from Capcom hurt Technos Japan a lot with Final Fight which was superior on every level to Double Dragon III. Not only they had amazing designers, they also gave their teams means to innovate on the hardware level (CPS-1). 

  For us it was an horrible awakening because it proved we had been unable to evolve as fast as them.
  %<ref src="">Yoshihisa Kishimoto, Enter The Double Dragon: p142</ref>
  \end{q}



Not only quality improved, quantity also increased. Thanks to its stable platform and tools, Capcom was able to release more than thirty tile between 1988 and 1995, all based on its CPS-1 platform. 

And then in 1991 came the worldwide mega-hit, "Street Fighter 2".\index{Game!Street Fighter 2}

\label{nin_sf2}
\begin{figure}[H]
\img{sf2_4_3.png}
\caption*{Street Fighter 2 (1991).}
\end{figure}

\index{Game!All from 1988 to 1995}
\begin{figure}[H]
{ \setlength{\tabcolsep}{3.0pt}
\begin{tabularx}{\textwidth}{Xrr} 
  \textbf{Game Name} & \textbf{ GFX }  & \textbf{ Year } \\               
  \toprule    
\href{}{Forgotten Worlds} & 4 MiB & 1988 \\ 
\href{}{Ghouls'n Ghosts} & 3 MiB & 1988 \\ 
  \toprule    
\href{}{Strider} & 4 MiB & 1989 \\ 
\href{}{Dynasty Wars} & 8 MiB & 1989 \\ 
\href{}{Willow} & 4 MiB & 1989 \\ 
\href{}{U.N Squadron} & 2 MiB & 1989 \\ 
\href{}{Final Fight} & 2 MiB & 1989 \\ 
  \toprule    
\href{}{1941: Counter Attack} & 2 MiB &  1990 \\ 
\href{}{Mercs} &  3 MiB & 1990 \\ 
\href{}{Mega Twins} & 2 MiB & 1990 \\ 
\href{}{Magic Sword} & 2 MiB & 1990 \\ 
\href{}{Carrier Air Wing} & 2 MiB  & 1990 \\ 
\href{}{Nemo} & 2 MiB &  1990 \\ 
  \toprule    
\href{}{Street Fighter II: The World Warrior} & 6 MiB & 1991 \\ 
\href{}{Three Wonders} & 4 MiB & 1991 \\ 
\href{}{The King of Dragons} & 4 MiB & 1991 \\ 
\href{}{Captain Commando} &  4 MiB & 1991 \\ 
\href{}{Knights of the Round} & 4 MiB  & 1991 \\ 
  \toprule    
\href{}{Street Fighter II: Champion Edition} & 6 MiB & 1992 \\ 
\href{}{Adventure Quiz: Capcom World 2} & 2 MiB & 1992 \\ 
\href{}{Varth: Operation Thunderstorm} & 2 MiB & 1992 \\ 
\href{}{Quiz \& Dragons: Capcom Quiz Game} & 2 MiB & 1992 \\ 
\href{}{Street Fighter II' Turbo: Hyper Fighting} &  6 MiB & 1992 \\ 
  \toprule    
\href{}{Ken Sei Mogura: Street Fighter II} & 6 MiB & 1993 \\ 
\href{}{Pnickies} & 2 MiB & 1993 \\ 
  \toprule    
\href{}{Quiz Tonosama no Yabo 2} &  4 MiB & 1995 \\ 
\href{}{Pang! 3} & 2 MiB  & 1995 \\ 
Mega Man the Power Battle & 8 MiB  & 1995 \\

\toprule    
\end{tabularx}%
}\caption*{Capcom CPS-1 based arcade games from 1988 to 1995.}
\end{figure}







"Street Fighter 2" was a quantum leap in gaming. 

It was the result of a perfect timing where Capcom design skills crafted in the necessity of survival entered into a synergy with their new found technology. The game blew gamers minds. The eight characters came in different size, shape and gender. They each had their own characteristics, moves and powers. They had depth. The music was engaging, the audio effects crisp. Control felt precise. 

And what to say about the outstanding per-line parallax and full screen 60Hz animation?






\label{nin_sf2}
\begin{figure}[H]
\img{sf2_tournament.png}
\caption*{Street Fighter 2 tournament flyer.}
\end{figure}

The game immediately developed a cult following. Players had to wait in lines to drop a quarter. "Continue" were frowned upon by other players waiting for their turn. The popularity was such that tournaments with cash rewards were held. 

Operators purchased multiple copies\cite{sf2_oral_history} to reduce the wait time but at the end of the days machines still overflowed with coins.



By 1995, the series had generated \$2.3 billion with 200,000 cabinets sold\cite{usgamer20160101} (60,000 World Warriors units and 140,000 Champion Edition units). By 2017 that figure reached \$10.61 billions\cite{gamerevolution20140126}, making "Street Fighter 2" the third top grossing game of all time.


\section{Ode to CP-System}

This book is a engineering love letter to the system that enabled Capcom to operate a metamorphosism. To evolve from a company fighting for survival to become an arcades household.

The goal of this work is to understand the CP-System completely. This will (hopefully) be achieved by first investigating the metal and them progressively moving up, all the way to the game engine layer.

In the first chapter, the hardware of the three systems making the CP-System is explored. Beyond the hard reality of silicon and bus lines, a discussion of the design choices and real-life examples of how games leveraged features is provided when relevant.

The sub-sequent chapters study the software and how to build it. In particular are explained the five pipelines resulting in a game. From the Motorola 68000 and Zilog 80 programming to the integration of assets for the OKI (SFX), the YM2151 (musics) and the CPS-A/B (GFX).


\begin{CJK}{UTF8}{min}
Ready? さあ行こう!
\end{CJK}



